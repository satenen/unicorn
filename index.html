<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unicorn Rainbow Chase</title>
    <style>
        canvas { border: 1px solid black; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <p>Use arrow keys to move the unicorn</p>
    <p>Rainbows: <span id="rainbowCount">0</span>/20 | Coins: <span id="coinCount">0</span>/5</p>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const rainbowCountEl = document.getElementById('rainbowCount');
        const coinCountEl = document.getElementById('coinCount');

        let unicorn = { x: 50, y: 200, width: 50, height: 50, speed: 5 };
        let rainbows = [];
        let rainbowCount = 0;
        let coinCount = 0;

        function drawUnicorn() {
            ctx.fillStyle = 'pink';
            ctx.fillRect(unicorn.x, unicorn.y, unicorn.width, unicorn.height);
        }

        function drawRainbow(rainbow) {
            ctx.fillStyle = 'blue'; // Changed to blue for visibility
            ctx.beginPath();
            ctx.arc(rainbow.x, rainbow.y, rainbow.radius, 0, Math.PI * 2);
            ctx.fill();
        }

        function createRainbow() {
            rainbows.push({
                x: canvas.width,
                y: Math.random() * (canvas.height - 20),
                radius: 10,
                speed: 2
            });
        }

        function moveUnicorn(e) {
            switch(e.key) {
                case 'ArrowUp':
                    unicorn.y = Math.max(0, unicorn.y - unicorn.speed);
                    break;
                case 'ArrowDown':
                    unicorn.y = Math.min(canvas.height - unicorn.height, unicorn.y + unicorn.speed);
                    break;
                case 'ArrowLeft':
                    unicorn.x = Math.max(0, unicorn.x - unicorn.speed);
                    break;
                case 'ArrowRight':
                    unicorn.x = Math.min(canvas.width - unicorn.width, unicorn.x + unicorn.speed);
                    break;
            }
        }

        function checkCollision(rainbow) {
            return unicorn.x < rainbow.x + rainbow.radius &&
                   unicorn.x + unicorn.width > rainbow.x - rainbow.radius &&
                   unicorn.y < rainbow.y + rainbow.radius &&
                   unicorn.y + unicorn.height > rainbow.y - rainbow.radius;
        }

        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawUnicorn();

            rainbows.forEach((rainbow, index) => {
                rainbow.x -= rainbow.speed;
                drawRainbow(rainbow);

                if (checkCollision(rainbow)) {
                    rainbows.splice(index, 1);
                    rainbowCount++;
                    if (rainbowCount % 20 === 0) {
                        coinCount++;
                    }
                }

                if (rainbow.x + rainbow.radius < 0) {
                    rainbows.splice(index, 1);
                }
            });

            if (Math.random() < 0.02) {
                createRainbow();
            }

            rainbowCountEl.textContent = rainbowCount % 20;
            coinCountEl.textContent = coinCount;

            if (coinCount >= 5) {
                ctx.fillStyle = 'black';
                ctx.font = '48px Arial';
                ctx.fillText('WINNER!', canvas.width / 2 - 80, canvas.height / 2);
            } else {
                requestAnimationFrame(updateGame);
            }
        }

        document.addEventListener('keydown', moveUnicorn);
        updateGame();
    </script>
</body>
</html>
